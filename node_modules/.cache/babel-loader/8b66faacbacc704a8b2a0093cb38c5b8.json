{"ast":null,"code":"var $ = window.$;\nmodule.exports = {\n  login: function login(username, pass, cb) {\n    if (localStorage.token) {\n      if (cb) cb(true);\n      return;\n    }\n\n    this.getToken(username, pass, function (res) {\n      if (res.authenticated) {\n        localStorage.token = res.token;\n        if (cb) cb(true);\n      } else {\n        if (cb) cb(false);\n      }\n    });\n  },\n  logout: function logout() {\n    delete localStorage.token;\n  },\n  loggedIn: function loggedIn() {\n    return !!localStorage.token;\n  },\n  getToken: function getToken(username, pass, cb) {\n    $.ajax({\n      type: 'POST',\n      url: '/api/rest-auth/login',\n      data: {\n        username: username,\n        password: pass\n      },\n      success: function success(res) {\n        cb({\n          authenticated: true,\n          token: res.token\n        });\n      },\n      error: function error(xhr, status, err) {\n        cb({\n          authenticated: false\n        });\n      }\n    });\n  }\n};","map":{"version":3,"sources":["C:\\Users\\AnhTuanPC\\PycharmProjects\\project-forum\\src\\components\\auth.js"],"names":["$","window","module","exports","login","username","pass","cb","localStorage","token","getToken","res","authenticated","logout","loggedIn","ajax","type","url","data","password","success","error","xhr","status","err"],"mappings":"AAAA,IAAMA,CAAC,GAAGC,MAAM,CAACD,CAAjB;AACAE,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,KAAK,EAAE,eAASC,QAAT,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AAChC,QAAIC,YAAY,CAACC,KAAjB,EAAwB;AACpB,UAAIF,EAAJ,EAAQA,EAAE,CAAC,IAAD,CAAF;AACR;AACH;;AACD,SAAKG,QAAL,CAAcL,QAAd,EAAwBC,IAAxB,EAA8B,UAACK,GAAD,EAAS;AACnC,UAAIA,GAAG,CAACC,aAAR,EAAuB;AACnBJ,QAAAA,YAAY,CAACC,KAAb,GAAqBE,GAAG,CAACF,KAAzB;AACA,YAAIF,EAAJ,EAAQA,EAAE,CAAC,IAAD,CAAF;AACX,OAHD,MAGO;AACH,YAAIA,EAAJ,EAAQA,EAAE,CAAC,KAAD,CAAF;AACX;AACJ,KAPD;AAQH,GAdY;AAgBbM,EAAAA,MAAM,EAAE,kBAAW;AACf,WAAOL,YAAY,CAACC,KAApB;AACH,GAlBY;AAoBbK,EAAAA,QAAQ,EAAE,oBAAW;AACjB,WAAO,CAAC,CAACN,YAAY,CAACC,KAAtB;AACH,GAtBY;AAwBbC,EAAAA,QAAQ,EAAE,kBAASL,QAAT,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AACnCP,IAAAA,CAAC,CAACe,IAAF,CAAO;AACHC,MAAAA,IAAI,EAAE,MADH;AAEHC,MAAAA,GAAG,EAAE,sBAFF;AAGHC,MAAAA,IAAI,EAAE;AACFb,QAAAA,QAAQ,EAAEA,QADR;AAEFc,QAAAA,QAAQ,EAAEb;AAFR,OAHH;AAOHc,MAAAA,OAAO,EAAE,iBAAST,GAAT,EAAa;AAClBJ,QAAAA,EAAE,CAAC;AACCK,UAAAA,aAAa,EAAE,IADhB;AAECH,UAAAA,KAAK,EAAEE,GAAG,CAACF;AAFZ,SAAD,CAAF;AAIH,OAZE;AAaHY,MAAAA,KAAK,EAAE,eAACC,GAAD,EAAMC,MAAN,EAAcC,GAAd,EAAsB;AACzBjB,QAAAA,EAAE,CAAC;AACCK,UAAAA,aAAa,EAAE;AADhB,SAAD,CAAF;AAGH;AAjBE,KAAP;AAmBH;AA5CY,CAAjB","sourcesContent":["const $ = window.$;\r\nmodule.exports = {\r\n    login: function(username, pass, cb) {\r\n        if (localStorage.token) {\r\n            if (cb) cb(true)\r\n            return\r\n        }\r\n        this.getToken(username, pass, (res) => {\r\n            if (res.authenticated) {\r\n                localStorage.token = res.token\r\n                if (cb) cb(true)\r\n            } else {\r\n                if (cb) cb(false)\r\n            }\r\n        })\r\n    },\r\n\r\n    logout: function() {\r\n        delete localStorage.token\r\n    },\r\n\r\n    loggedIn: function() {\r\n        return !!localStorage.token\r\n    },\r\n\r\n    getToken: function(username, pass, cb) {\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/api/rest-auth/login',\r\n            data: {\r\n                username: username,\r\n                password: pass\r\n            },\r\n            success: function(res){\r\n                cb({\r\n                    authenticated: true,\r\n                    token: res.token\r\n                })\r\n            },\r\n            error: (xhr, status, err) => {\r\n                cb({\r\n                    authenticated: false\r\n                })\r\n            }\r\n        })\r\n    },\r\n}"]},"metadata":{},"sourceType":"module"}